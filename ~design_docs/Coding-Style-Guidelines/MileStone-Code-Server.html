<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=gbk" />
	<style type="text/css">
		body {text-align:center;color:#666;font: 16px/1 Tahoma, Helvetica, Arial, ”\5b8b\4f53″, sans-serif;}
		h1,h2,h3 {color:#000;}
		#wrapper {margin:5px auto;width:920px;text-align:left;}
		a {text-decoration:none;}
		a:hover {text-decoration:underline;color:red;}
		.external {text-decoration:underline;color:blue;}
		.external:hover {text-decoration:none;}
		p {line-height:25px;}
		li{margin:10px 0;}
		table {margin-top:5px;border:1px solid #000;width:90%;}
		td {border:1px solid #000;}
		code {line-height:25px;}
		code.note {color:green;}
		code.src {color:#000;}
		.keywords {color:#800080;font-weight:bold;}
		.keywords1 {color:blue;font-weight:bold;}
		.description {color:#000;font-weight:bold;}
		
		#right {margin:5px auto;text-align:center;font-family:Arial;}
		#right p {line-height:10px;font-size:small;}
		#right a,#right a:hover {text-decoration:underline;color:blue;}
	</style>
</head>
<body>
	<div id="wrapper">
		<h1>MileStone服务器端编码规范</h1>
		<hr />
		<p><a href="MileStone-Code-Index.html">返回</a></p>
		
		<h2>目录</h2>
		<ul>
			<li><a href="#1">1 序言</a></li>
			<li><a href="#2">2 命名规范</a></li>
			<li><a href="#3">3 文件组织</a></li>
				<ul>
					<li><a href="#3-1">3.1 开头注释</a></li>
					<li><a href="#3-2">3.2 包和引入语句</a></li>
					<li><a href="#3-3">3.3 类和接口的注释</a></li>
					<li><a href="#3-4">3.4 方法的注释</a></li>
					<li><a href="#3-5">3.5 属性的注释</a></li>
					<li><a href="#3-6">3.6 方法内的注释</a></li>
					<li><a href="#3-7">3.7 修改程序时必要的注释</a></li>
					<li><a href="#3-8">3.8 主要方法规范</a></li>
				</ul>
			<li><a href="#4">4 格式排版</a></li>
		</ul>
		
		<hr />
		
		<h2><a name="1"></a>1 序言</h2>
		<p>这里是MileStone项目组的服务器端编码规范文档。</p>
		<p>
		由于本次的MedicareSystem项目的服务器端由JAVA语言开发，因此本系统所有JAVA代码必须遵照Sun公司的JAVA编程规范。以下是基本规范基础上的强调事项及附加规范。你可以查看详细的<a href="http://www.oracle.com/technetwork/java/codeconvtoc-136057.html" class="external">Java编码规范</a>。
		</p>
		<p>如果你对编码风格及规范方面存在疑问，可以查看这份<a href="http://geosoft.no/development/javastyle.html" class="external">Java Programming Style Guidline</a>。
		
		<h2><a name="2"></a>2 命名规范</h2>
		<p>代码命名总原则：</p>
		<ol>
			<li>用全英文单词命名的方式，准确地描述变量、属性、类等。</li>
			<li>采用大小写混合的方式来命名，以便命名有很好的可读性。如：getPrescription, addCasehistory。</li>
			<ul>
				<li>Package的名字应该都是由一个小写单词组成。</li>
				<li>Class的名字必须由大写字母开头而其他字母都小写的单词组成。</li>
				<li>Class 变量的名字必须用一个小写字母开头。后面的单词用大写字母开头。</li>
				<li>Static Final 变量的名字应该都大写，并且指出完整含义。</li>  
				<li>参数的名字必须和变量的命名规范一致。</li> 
			</ul>
			<li>尽量避免太长的命名，一般以少于20个字符为宜。</li>
			<li>规定命名中的关键词如下：
				<table>
					<tr><td>病历</td><td>CaseHistory</td></tr>
					<tr><td>处方</td><td>Prescription</td></tr>
					<tr><td>医生</td><td>Doctor</td></tr>
					<tr><td>病人</td><td>Patient</td></tr>
				</table>
			</li>
		</ol>
		
		<h2><a name="3"></a>3 文件组织</h2>
		<p>一个文件由被空行分割而成的段落以及标识每个段落的可选注释共同组成。超过2000行的程序难以阅读，应该尽量避免。</p>
		
		<h3><a name="3-1"></a>3.1 开头注释</h3>
		<pre><code class="note">
   /***
      * Copyright 2010  XXX Co. Ltd. 
      * All rights reserved.
      * Package:  com.service.impl
      * FileName: XXX.java
      * Description: ... ...
      */</code></pre>
		
		<h3><a name="3-2"></a>3.2 包和引入语句</h3>
		<p>在Java源文件中，第一个非注释行是包语句。在它之后可以跟引入语句。</p>
		<pre>
例如：
		<code class="src">
<span class="keywords">package</span> java.awt;
 
<span class="keywords1">import</span> java.awt.peer.CanvasPeer;</code></pre>
		
		<h3><a name="3-3"></a>3.3 类和接口的注释</h3>
		<pre><code class="note">
   /***
      * @功能          	    UI--用户登录
      * @author  创建人     xxx
      * @date    创建日期   2010-11-10
      * @author  修改人     xxxx
      * @date    修改日期   2010-10-11
      * @author  修改说明   调整登录
      * @version 1.0
      */
		</code></pre>
		<p>注：修改说明这里可以只是做个简单的说明，具体情况可以看代码中的修改记录。</p>
		
		<h3><a name="3-4"></a>3.4 方法的注释</h3>
		<p>原则：以“/*”开始，“*/”结尾注释。写明程序作用，以及输入输出参数，和异常。</p>
		<pre>
例如：
		<code class="note">
  /***
     * 根据业务命令，调用业务方法。
     * @param request HTTP请求
     * @param response HTTP应答
     * @param context HTTP上下文
     * @return boolean true：合法 false：失败
     * @throws EB_Exception处理异常
     */
		</code>
		<code class="src">
    <span class="keywords">public</span> <span class="keywords">boolean</span> doGet(Request request, Response response, Context context) <span class="keywords1">throws</span> EB_Exception {
        ……
        <span class="keywords">return</span> true;
    }</code></pre>
		
		<h3><a name="3-5"></a>3.5 属性的注释</h3>
		<p>原则：以“/*”开始，“*/”结尾注释。写明该属性的含义。</p>
		<pre>
例如：
		<code class="note">
  /***
     * 应用程序实例的类型
     */</code><code class="src">
     <span class="keywords">private</span> <span class="keywords">String</span> type;</code></pre>
		
		<h3><a name="3-6"></a>3.6 方法内的注释</h3>
		<p>原则：语句末尾以“//”开始注释。</p>
		<pre>
例如：
		<code class="src">
  <span class="keywords">public</span> <span class="keywords">static</span> <span class="keywords">void</span> logout()  {
	  Sessions.getCurrent().removeAttribute("userid"); <code class="note">//退出同时清除session中UserID</code> 	  
	  Sessions.getCurrent().removeAttribute("username"); <code class="note">//退出同时清除session中的UserName</code>
  }</code></pre>
		
		<h3><a name="3-7"></a>3.7 修改程序时必要的注释</h3>
		<ul>
			<li>
			<p>增加代码</p>
			<pre>例如：
			<code class="note">
//add by milestone 2010-10-10 begin
//增加登录校验功能
......
<span class="description">具体新增程序代码</span>
......
//add by milestone 2010-10-10 end</code></pre>
			</li>
			<li>
			<p>修改代码</p>
			<p>原则上修改，删除的时候一定要保留原来的程序代码，不要直接修改或删除。可以用“/*  */”或者“//”进行注释后再做修改和删除。</p>
			<pre>例如：
			<code class="note">
//modify by milestone 2010-10-10 begin
//修改登录校验功能
/*
......
Sessions.getCurrent().setAttribute("userid", id);
......
*/
......
<span class="description">具体新程序代码</span>
......
//modify by milestone 2010-10-10 end</code></pre>
			</li>
			<li>
			<p>删除代码</p>
			<pre>例如：
			<code class="note">
//del by milestone 2010-10-10 begin
//删除原有获取数据集的方式
/*
public Vector getQueryData() throws EB_Exception
{
......
}
*/
//del by milestone 2010-10-10 end</code></pre>
			</li>
		</ul>
		
		<h3><a name="3-8"></a>3.8 主要方法规范</h3>
		<ul>
			<li>
			<p>存取方法</p>
			<p>类变量的存取的方法若只是简单的用来将类的变量赋值获取值的话，可以写在一行上。</p>
			<pre>例如：
			<code class="src">
<span class="keywords">public</span> <span class="keywords">int</span><span class="keywords1">[]</span> getPackets() { <span class="keywords">return</span> copyArray(packets, offset); } 
<span class="keywords">public</span> <span class="keywords">void</span> setPackets(<span class="keywords">int</span><span class="keywords1">[]</span> packets) { <span class="keywords">this</span>.packets = packets; }</code></pre>
			</li>
			<li>
			<p>构造函数</p>
			<p>构造函数应该用递增的方式写（比如：参数多的写在后面）。</p>
			</li>
			<li>
			<p>main方法</p>
			<p>如果<code class="src"><span class="keywords">void</span> <span class="keywords">main</span>(<span class="keywords">String</span><span class="keywords1">[]</span> args)</code>方法已经定义了, 那么它应该写在类的底部。</p>
			</li>
		</ul>
		
		<h2><a name="4"></a>4 格式排版</h2>
		<ol>
			<li><p>页宽设置为80字符，源代码一般不会超过这个宽度。</p></li>
			<li><p>在任何情况下, 超长的语句应该在一个逗号或者一个操作符后折行。一条语句折行后, 应该比原来的语句再缩进2个字符。</p></li>
			<li><p><span class="description">{ }</span>对<span class="description"> { </span>和<span class="description"> } </span>不允许在同一行，<span class="description">}</span>语句永远单独作为一行。
			<li><p>左括号和后一个字符之间不应该出现空格，同样，右括号和前一个字符之间也不应该出现空格。</p>
			<p>下面的例子说明括号和空格的错误及正确使用：</p>
			<code class="src">
			CallProc( AParameter ); <code class="note">// 错误</code><br/>
			CallProc(AParameter); <code class="note">// 正确</code>  
			</code>
			</li>
		</ol>
		
		<hr />
		<div id="right">
			<p>&copy; 2010 MileStone Team.All rights reserved.</p>
			<p>This page is maintained by <a href="mailto:kongxp920@gmail.com">kongxp920@gmail.com</a></p>
		</div>
	</div>
</body>
</html>
